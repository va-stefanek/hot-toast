import { race, Subject } from 'rxjs';
export class HotToastRef {
    constructor(toast) {
        this.toast = toast;
        /** Subject for notifying the user that the toast has been closed. */
        this._onClosed = new Subject();
    }
    set dispose(value) {
        this._dispose = value;
    }
    getToast() {
        return this.toast;
    }
    /**Used for internal purpose
     * Attach ToastRef to container
     */
    appendTo(container) {
        const { dispose, updateMessage, updateToast, afterClosed } = container.addToast(this);
        this.dispose = dispose;
        this.updateMessage = updateMessage;
        this.updateToast = updateToast;
        this.afterClosed = race(this._onClosed.asObservable(), afterClosed);
        return this;
    }
    /**
     * Closes the toast
     *
     * @param [closeData={ dismissedByAction: false }] -
     * Make sure to pass { dismissedByAction: true } when closing from template
     * @memberof HotToastRef
     */
    close(closeData = { dismissedByAction: false }) {
        this._dispose();
        this._onClosed.next({ dismissedByAction: closeData.dismissedByAction, id: this.toast.id });
        this._onClosed.complete();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG90LXRvYXN0LXJlZi5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ25lYXQvaG90LXRvYXN0L3NyYy8iLCJzb3VyY2VzIjpbImxpYi9ob3QtdG9hc3QtcmVmLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBYyxJQUFJLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBSWpELE1BQU0sT0FBTyxXQUFXO0lBYXRCLFlBQW9CLEtBQVk7UUFBWixVQUFLLEdBQUwsS0FBSyxDQUFPO1FBSGhDLHFFQUFxRTtRQUM3RCxjQUFTLEdBQUcsSUFBSSxPQUFPLEVBQWlCLENBQUM7SUFFZCxDQUFDO0lBUHBDLElBQUksT0FBTyxDQUFDLEtBQWlCO1FBQzNCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFPRCxRQUFRO1FBQ04sT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7T0FFRztJQUNILFFBQVEsQ0FBQyxTQUFxQztRQUM1QyxNQUFNLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV0RixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN2QixJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztRQUNuQyxJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUMvQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ3BFLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILEtBQUssQ0FBQyxZQUE0QyxFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRTtRQUM1RSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxpQkFBaUIsRUFBRSxTQUFTLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMzRixJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzVCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRlbnQgfSBmcm9tICdAbmduZWF0L292ZXJ2aWV3JztcbmltcG9ydCB7IE9ic2VydmFibGUsIHJhY2UsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEhvdFRvYXN0Q29udGFpbmVyQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2hvdC10b2FzdC1jb250YWluZXIvaG90LXRvYXN0LWNvbnRhaW5lci5jb21wb25lbnQnO1xuaW1wb3J0IHsgSG90VG9hc3RDbG9zZSwgVG9hc3QsIFVwZGF0ZVRvYXN0T3B0aW9ucywgSG90VG9hc3RSZWZQcm9wcyB9IGZyb20gJy4vaG90LXRvYXN0Lm1vZGVsJztcblxuZXhwb3J0IGNsYXNzIEhvdFRvYXN0UmVmIGltcGxlbWVudHMgSG90VG9hc3RSZWZQcm9wcyB7XG4gIHVwZGF0ZU1lc3NhZ2U6IChtZXNzYWdlOiBDb250ZW50KSA9PiB2b2lkO1xuICB1cGRhdGVUb2FzdDogKG9wdGlvbnM6IFVwZGF0ZVRvYXN0T3B0aW9ucykgPT4gdm9pZDtcbiAgYWZ0ZXJDbG9zZWQ6IE9ic2VydmFibGU8SG90VG9hc3RDbG9zZT47XG5cbiAgcHJpdmF0ZSBfZGlzcG9zZTogKCkgPT4gdm9pZDtcbiAgc2V0IGRpc3Bvc2UodmFsdWU6ICgpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9kaXNwb3NlID0gdmFsdWU7XG4gIH1cblxuICAvKiogU3ViamVjdCBmb3Igbm90aWZ5aW5nIHRoZSB1c2VyIHRoYXQgdGhlIHRvYXN0IGhhcyBiZWVuIGNsb3NlZC4gKi9cbiAgcHJpdmF0ZSBfb25DbG9zZWQgPSBuZXcgU3ViamVjdDxIb3RUb2FzdENsb3NlPigpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdG9hc3Q6IFRvYXN0KSB7fVxuXG4gIGdldFRvYXN0KCkge1xuICAgIHJldHVybiB0aGlzLnRvYXN0O1xuICB9XG5cbiAgLyoqVXNlZCBmb3IgaW50ZXJuYWwgcHVycG9zZVxuICAgKiBBdHRhY2ggVG9hc3RSZWYgdG8gY29udGFpbmVyXG4gICAqL1xuICBhcHBlbmRUbyhjb250YWluZXI6IEhvdFRvYXN0Q29udGFpbmVyQ29tcG9uZW50KSB7XG4gICAgY29uc3QgeyBkaXNwb3NlLCB1cGRhdGVNZXNzYWdlLCB1cGRhdGVUb2FzdCwgYWZ0ZXJDbG9zZWQgfSA9IGNvbnRhaW5lci5hZGRUb2FzdCh0aGlzKTtcblxuICAgIHRoaXMuZGlzcG9zZSA9IGRpc3Bvc2U7XG4gICAgdGhpcy51cGRhdGVNZXNzYWdlID0gdXBkYXRlTWVzc2FnZTtcbiAgICB0aGlzLnVwZGF0ZVRvYXN0ID0gdXBkYXRlVG9hc3Q7XG4gICAgdGhpcy5hZnRlckNsb3NlZCA9IHJhY2UodGhpcy5fb25DbG9zZWQuYXNPYnNlcnZhYmxlKCksIGFmdGVyQ2xvc2VkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIHRvYXN0XG4gICAqXG4gICAqIEBwYXJhbSBbY2xvc2VEYXRhPXsgZGlzbWlzc2VkQnlBY3Rpb246IGZhbHNlIH1dIC1cbiAgICogTWFrZSBzdXJlIHRvIHBhc3MgeyBkaXNtaXNzZWRCeUFjdGlvbjogdHJ1ZSB9IHdoZW4gY2xvc2luZyBmcm9tIHRlbXBsYXRlXG4gICAqIEBtZW1iZXJvZiBIb3RUb2FzdFJlZlxuICAgKi9cbiAgY2xvc2UoY2xvc2VEYXRhOiB7IGRpc21pc3NlZEJ5QWN0aW9uOiBib29sZWFuIH0gPSB7IGRpc21pc3NlZEJ5QWN0aW9uOiBmYWxzZSB9KSB7XG4gICAgdGhpcy5fZGlzcG9zZSgpO1xuICAgIHRoaXMuX29uQ2xvc2VkLm5leHQoeyBkaXNtaXNzZWRCeUFjdGlvbjogY2xvc2VEYXRhLmRpc21pc3NlZEJ5QWN0aW9uLCBpZDogdGhpcy50b2FzdC5pZCB9KTtcbiAgICB0aGlzLl9vbkNsb3NlZC5jb21wbGV0ZSgpO1xuICB9XG59XG4iXX0=